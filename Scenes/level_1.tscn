[gd_scene load_steps=18 format=3 uid="uid://dov7ysq5n1piu"]

[ext_resource type="Script" path="res://Scripts/game_manager.gd" id="1_heq6h"]
[ext_resource type="PackedScene" uid="uid://clvrde8jqq25h" path="res://Scenes/lose_screen.tscn" id="2_dli7n"]
[ext_resource type="PackedScene" uid="uid://d4cvfd3gklfts" path="res://Scenes/win_screen.tscn" id="3_n2l3i"]
[ext_resource type="PackedScene" uid="uid://cg685sdnkomnv" path="res://Scenes/ball_spawner.tscn" id="4_7h1ft"]
[ext_resource type="PackedScene" uid="uid://dpwmoutru23ue" path="res://Scenes/pause_screen.tscn" id="4_eql3b"]
[ext_resource type="Script" path="res://Scripts/ball_deleter.gd" id="5_g0cp4"]
[ext_resource type="PackedScene" uid="uid://cntjt1pdekdqo" path="res://Scenes/player.tscn" id="6_20xd0"]
[ext_resource type="PackedScene" uid="uid://dyl4too4a36xg" path="res://Scenes/block.tscn" id="7_1rcx7"]
[ext_resource type="PackedScene" uid="uid://0yu2fk7k4osc" path="res://Scenes/static_border_2d.tscn" id="8_u6dy3"]
[ext_resource type="Script" path="res://Scripts/player_ui.gd" id="9_wbtf5"]
[ext_resource type="PackedScene" uid="uid://brjab31847bob" path="res://Scenes/shield_icon.tscn" id="10_ff4rn"]
[ext_resource type="PackedScene" uid="uid://c71me4vbd2lju" path="res://Scenes/enemy.tscn" id="11_4nif5"]
[ext_resource type="Resource" uid="uid://bltke1i14s52f" path="res://Enemy Resources/Dragon_Enemy.tres" id="13_1k1mw"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xuxqu"]
size = Vector2(39, 660)

[sub_resource type="LabelSettings" id="LabelSettings_0j6qy"]
font_size = 30

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_anbr5"]
bg_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_xxlm8"]
bg_color = Color(0.68, 0.147333, 0.0408, 1)

[node name="Main2D" type="Node2D"]

[node name="GameManager" type="Node2D" parent="."]
script = ExtResource("1_heq6h")
loseScreen = ExtResource("2_dli7n")
winScreen = ExtResource("3_n2l3i")
pauseScreen = ExtResource("4_eql3b")

[node name="BallSpawner" parent="." instance=ExtResource("4_7h1ft")]
position = Vector2(549, 340)

[node name="BallDeleter" type="Area2D" parent="."]
position = Vector2(0, 343)
collision_mask = 8
script = ExtResource("5_g0cp4")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BallDeleter"]
position = Vector2(1.5, 16)
shape = SubResource("RectangleShape2D_xuxqu")

[node name="Player" parent="." instance=ExtResource("6_20xd0")]
position = Vector2(146, 352)

[node name="AllBlocks" type="Node2D" parent="."]
position = Vector2(856, 335)

[node name="BlockRow" type="Node2D" parent="AllBlocks"]
position = Vector2(-49, -4)

[node name="Block" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -267)

[node name="Block2" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -195)

[node name="Block3" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -121)

[node name="Block4" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -50)

[node name="Block5" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 22)

[node name="Block6" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 93)

[node name="Block8" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 167)

[node name="Block9" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 240)

[node name="Block10" parent="AllBlocks/BlockRow" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 314)

[node name="BlockRow2" type="Node2D" parent="AllBlocks"]
position = Vector2(-6, -4)

[node name="Block" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -267)

[node name="Block2" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -195)

[node name="Block3" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -121)

[node name="Block4" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -50)

[node name="Block5" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 22)

[node name="Block6" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 93)

[node name="Block8" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 167)

[node name="Block9" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 240)

[node name="Block10" parent="AllBlocks/BlockRow2" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 314)

[node name="BlockRow3" type="Node2D" parent="AllBlocks"]
position = Vector2(37, -4)

[node name="Block" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -267)

[node name="Block2" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -195)

[node name="Block3" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -121)

[node name="Block4" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, -50)

[node name="Block5" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 22)

[node name="Block6" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 93)

[node name="Block8" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 167)

[node name="Block9" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 240)

[node name="Block10" parent="AllBlocks/BlockRow3" instance=ExtResource("7_1rcx7")]
position = Vector2(0, 314)

[node name="Borders" type="Node2D" parent="."]

[node name="StaticBorder2D" parent="Borders" instance=ExtResource("8_u6dy3")]

[node name="StaticBorder2D2" parent="Borders" instance=ExtResource("8_u6dy3")]
position = Vector2(0, 692)

[node name="StaticBorder2D4" parent="Borders" instance=ExtResource("8_u6dy3")]
position = Vector2(1284, -10)
rotation = 1.5708
scale = Vector2(0.640001, 1)

[node name="PlayerUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1280.0
offset_bottom = 720.0
script = ExtResource("9_wbtf5")
shieldIconScene = ExtResource("10_ff4rn")

[node name="LifeText" type="Label" parent="PlayerUI"]
layout_mode = 0
offset_left = 45.0
offset_top = 29.0
offset_right = 126.0
offset_bottom = 71.0
text = "Lives:"
label_settings = SubResource("LabelSettings_0j6qy")

[node name="LifeNumber" type="Label" parent="PlayerUI"]
layout_mode = 0
offset_left = 140.0
offset_top = 29.0
offset_right = 184.0
offset_bottom = 71.0
text = "0"
label_settings = SubResource("LabelSettings_0j6qy")

[node name="StunnedUI" type="Control" parent="PlayerUI"]
anchors_preset = 0
offset_left = 45.0
offset_top = 76.0
offset_right = 345.0
offset_bottom = 121.0

[node name="StunText" type="Label" parent="PlayerUI/StunnedUI"]
layout_mode = 0
offset_right = 150.0
offset_bottom = 42.0
text = "STUNNED:"
label_settings = SubResource("LabelSettings_0j6qy")

[node name="ProgressBar" type="ProgressBar" parent="PlayerUI/StunnedUI"]
layout_mode = 0
offset_left = 163.0
offset_top = 7.0
offset_right = 299.0
offset_bottom = 39.0
theme_override_styles/background = SubResource("StyleBoxFlat_anbr5")
theme_override_styles/fill = SubResource("StyleBoxFlat_xxlm8")
value = 100.0
show_percentage = false

[node name="ShieldIconContainer" type="HBoxContainer" parent="PlayerUI"]
layout_mode = 0
offset_left = 209.0
offset_top = 33.0
offset_right = 258.0
offset_bottom = 78.0

[node name="Enemy" parent="." instance=ExtResource("11_4nif5")]
position = Vector2(1134, 340)
enemyResource = ExtResource("13_1k1mw")

[node name="StartAttackMark" type="Node2D" parent="."]
position = Vector2(160, 43)

[node name="EndAttackMark" type="Node2D" parent="."]
position = Vector2(160, 650)

[connection signal="lives_changed" from="GameManager" to="PlayerUI" method="_on_game_manager_lives_changed"]
[connection signal="zero_balls_on_screen" from="GameManager" to="BallSpawner" method="_on_game_manager_zero_balls_on_screen"]
[connection signal="body_entered" from="BallDeleter" to="BallDeleter" method="_on_body_entered"]
[connection signal="player_finished_stun" from="Player" to="PlayerUI" method="_on_player_finished_stun"]
[connection signal="player_stunned" from="Player" to="PlayerUI" method="_on_player_stunned"]
[connection signal="shield_state_changed" from="Player" to="PlayerUI" method="_on_player_shield_state_changed"]
